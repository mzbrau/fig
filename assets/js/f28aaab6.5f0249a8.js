"use strict";(self.webpackChunkfig_documentation=self.webpackChunkfig_documentation||[]).push([[7605],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),g=a,f=u["".concat(l,".").concat(g)]||u[g]||d[g]||r;return n?i.createElement(f,s(s({ref:t},p),{},{components:n})):i.createElement(f,s({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=g;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:a,s[1]=o;for(var c=2;c<r;c++)s[c]=n[c];return i.createElement.apply(null,s)}return i.createElement.apply(null,n)}g.displayName="MDXCreateElement"},8236:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(7462),a=(n(7294),n(3905));const r={sidebar_position:15},s="Instances",o={unversionedId:"features/instances",id:"features/instances",title:"Instances",description:"Fig supports overriding the default settings for a client with an instance. An instance is a special key that can be passed by the calling client. When an instance is provided, Fig attempts to find settings matching that instance name. If none are found, the default settings for that client are returned.",source:"@site/docs/features/instances.md",sourceDirName:"features",slug:"/features/instances",permalink:"/docs/features/instances",draft:!1,editUrl:"https://github.com/mzbrau/fig/tree/main/packages/create-docusaurus/templates/shared/docs/features/instances.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Authentication",permalink:"/docs/features/authentication"},next:{title:"Security Features",permalink:"/docs/security"}},l={},c=[{value:"Setting an Instance on a Client",id:"setting-an-instance-on-a-client",level:2},{value:"Appsettings.json",id:"appsettingsjson",level:3},{value:"Environment Variable",id:"environment-variable",level:3},{value:"Code",id:"code",level:3}],p={toc:c};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"instances"},"Instances"),(0,a.kt)("p",null,"Fig supports overriding the default settings for a client with an instance. An instance is a special key that can be passed by the calling client. When an instance is provided, Fig attempts to find settings matching that instance name. If none are found, the default settings for that client are returned."),(0,a.kt)("p",null,"Instances can be created by selecting the client and pressing the instance button. "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image-20221129153120621",src:n(9694).Z,width:"1286",height:"598"})),(0,a.kt)("p",null,"Once the instance is created, there will be two items in the clients list for that client."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image-20221129153215045",src:n(5236).Z,width:"634",height:"350"})),(0,a.kt)("p",null,"These settings can be set individually. If a client requests settings with no instance or an instance other than 'Instance1' (in the example above) then they will be given the default settings."),(0,a.kt)("p",null,"If a client requests settings with instance 'Instance1', they will be provided with those specific settings."),(0,a.kt)("h2",{id:"setting-an-instance-on-a-client"},"Setting an Instance on a Client"),(0,a.kt)("p",null,"If you need your application to use an instance, it can be set in 3 ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Appsettings.json file"),(0,a.kt)("li",{parentName:"ul"},"Environment variable"),(0,a.kt)("li",{parentName:"ul"},"Code")),(0,a.kt)("h3",{id:"appsettingsjson"},"Appsettings.json"),(0,a.kt)("p",null,"You can specify settings in the appsettings.json file provided you use the services builder extension."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c#"},'builder.Services.AddFig<ISettings, Settings>(new ConsoleLogger(), options =>\n{\n    options.ApiUri = new Uri("https://localhost:7281");\n    options.ClientSecret = "757bedb7608244c48697710da05db3ca";\n});\n')),(0,a.kt)("p",null,"The appsettings.json might look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Logging": {\n    "LogLevel": {\n      "Default": "Information",\n      "Microsoft.AspNetCore": "Warning"\n    }\n  },\n  "fig": {\n    "ApiUri": "https://localhost:7281",\n    "secretStore": "appSettings",\n    "PollIntervalMs": 20000,\n    "LiveReload": true,\n    "Instance": "myInstance",\n    "clientSecret": "e682dea03f044e0eb571c441eb095ee9"\n  },\n  "AllowedHosts": "*"\n}\n')),(0,a.kt)("h3",{id:"environment-variable"},"Environment Variable"),(0,a.kt)("p",null,"An environment variable can also be used provided the services builder extension is being used."),(0,a.kt)("p",null,"In that case it should be in the format:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"FIG_<CLIENT NAME>_INSTANCE\n")),(0,a.kt)("p",null,"For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"FIG_MYCLIENT_INSTANCE\n")),(0,a.kt)("h3",{id:"code"},"Code"),(0,a.kt)("p",null,"If you are not using the services builder, you must specify the instance in code. You need to set the Instance value in the FigOptions. You could drive this from any other configuration method as a hard coded value wouldn't seem to offer much value."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c#"},'var figOptions = new FigOptions\n{\n    ApiUri = new Uri("http://localhost:5260"),\n    ClientSecret = "c059383fc9b145d99b596bd00d892cf0",\n    Instance = "MyInstance"\n};\n')))}u.isMDXComponent=!0},9694:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/image-20221129153120621-a538398713d7c0151e85099bb73f7033.png"},5236:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/image-20221129153215045-23e8a4d336cbdd249a85db8c591cf4bb.png"}}]);