"use strict";(globalThis.webpackChunkfig_documentation=globalThis.webpackChunkfig_documentation||[]).push([[7302],{28453(e,t,i){i.d(t,{R:()=>r,x:()=>l});var n=i(96540);const a={},s=n.createContext(a);function r(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:t},e.children)}},44252(e,t,i){i.d(t,{A:()=>n});const n=i.p+"assets/images/fig-configuration-e129d823236802629424a60235018a8a.png"},95369(e,t,i){i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"features/configuration","title":"Configuration","description":"There are a few parameters which can be configured for Fig which enable or disable certain features in the application.","source":"@site/docs/features/7-configuration.md","sourceDirName":"features","slug":"/features/configuration","permalink":"/docs/next/features/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/mzbrau/fig/tree/main/doc/fig-documentation/docs/features/7-configuration.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"sidebar_label":"Configuration"},"sidebar":"tutorialSidebar","previous":{"title":"Import / Export","permalink":"/docs/next/features/import-export"},"next":{"title":"Web Hooks","permalink":"/docs/next/features/web-hooks"}}');var a=i(74848),s=i(28453);const r={sidebar_position:6,sidebar_label:"Configuration"},l="Configuration",o={},d=[{value:"Configuration Options",id:"configuration-options",level:2},{value:"Allow New Client Registrations",id:"allow-new-client-registrations",level:3},{value:"Allow Updated Client Registrations",id:"allow-updated-client-registrations",level:3},{value:"Allow Offline Settings",id:"allow-offline-settings",level:3},{value:"Allow File Imports",id:"allow-file-imports",level:3},{value:"Allow Display Scripts",id:"allow-display-scripts",level:3},{value:"Enable Time Machine",id:"enable-time-machine",level:3},{value:"Allow Client Overrides",id:"allow-client-overrides",level:3},{value:"Client Override Regex",id:"client-override-regex",level:3},{value:"Web Application Base Address",id:"web-application-base-address",level:3},{value:"API Secret Encryption Migration",id:"api-secret-encryption-migration",level:3},{value:"Azure Key Vault for Secrets (Experimental)",id:"azure-key-vault-for-secrets-experimental",level:3},{value:"Poll Interval Override (ms)",id:"poll-interval-override-ms",level:3},{value:"Data Cleanup",id:"data-cleanup",level:3},{value:"Time Machine (Checkpoints)",id:"time-machine-checkpoints",level:4},{value:"Event Logs",id:"event-logs",level:4},{value:"API Status",id:"api-status",level:4},{value:"Setting History",id:"setting-history",level:4},{value:"Appearance",id:"appearance",level:2}];function c(e){const t={admonition:"admonition",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,a.jsx)(t.p,{children:"There are a few parameters which can be configured for Fig which enable or disable certain features in the application."}),"\n",(0,a.jsx)(t.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,a.jsx)(t.h3,{id:"allow-new-client-registrations",children:"Allow New Client Registrations"}),"\n",(0,a.jsx)(t.p,{children:"When disabled, new client registrations (those who have not previously registered with Fig) will not be allowed to register."}),"\n",(0,a.jsx)(t.p,{children:"It is recommended that new registrations be disabled in a production system once all clients are registered for security reasons."}),"\n",(0,a.jsx)(t.h3,{id:"allow-updated-client-registrations",children:"Allow Updated Client Registrations"}),"\n",(0,a.jsx)(t.p,{children:"When disabled, clients will not be allowed to change the setting definitions when they register."}),"\n",(0,a.jsx)(t.p,{children:"This could be useful in a live upgrade situation where a new version of a client adds settings. Once the new settings have been added, disable updated registrations to avoid any instances of the older clients reverting the registration and removing the new settings."}),"\n",(0,a.jsx)(t.h3,{id:"allow-offline-settings",children:"Allow Offline Settings"}),"\n",(0,a.jsx)(t.p,{children:"Fig clients can save the settings values locally in a file so they client can still start even if the Fig API is down."}),"\n",(0,a.jsx)(t.p,{children:"Settings are encrypted using the client secret and stored in a binary file. However, it may still be desirable to disable this feature if additional security is more important than up time."}),"\n",(0,a.jsx)(t.h3,{id:"allow-file-imports",children:"Allow File Imports"}),"\n",(0,a.jsx)(t.p,{children:"Fig supports loading export from an import directory. This is a useful feature when Fig is deployed in a container as a Helm chart or similar can be used to set the initial configuration."}),"\n",(0,a.jsx)(t.p,{children:"However, depending on the level of access to the import directory, it may impose a security risk as imports can be configured to remove existing clients and settings."}),"\n",(0,a.jsx)(t.h3,{id:"allow-display-scripts",children:"Allow Display Scripts"}),"\n",(0,a.jsx)(t.p,{children:"Display scripts provide flexibility when configuring the behavior of the settings for a specific client."}),"\n",(0,a.jsx)(t.p,{children:"They should be quite safe as it has limited scope and runs within the web-assembly sandbox but it does involve executing code that has been written by a third party and as a result, if you don't trust all the registering clients, disabling this feature eliminates the possibility for misuse."}),"\n",(0,a.jsx)(t.h3,{id:"enable-time-machine",children:"Enable Time Machine"}),"\n",(0,a.jsx)(t.p,{children:"Time machine is a feature that takes regular snapshots of all setting values and saves them in the database."}),"\n",(0,a.jsx)(t.p,{children:"Depending on the number of changes this could start to add up to a lot of data. It will also take a little longer to perform every setting update."}),"\n",(0,a.jsx)(t.h3,{id:"allow-client-overrides",children:"Allow Client Overrides"}),"\n",(0,a.jsx)(t.p,{children:"Client overrides allow applications to override the setting value for settings based on an environment variable."}),"\n",(0,a.jsx)(t.p,{children:"This can be useful for container deployments where you want to set container deployment specific values but still see an manage the settings in Fig."}),"\n",(0,a.jsx)(t.p,{children:"Note that any settings changes will be reverted on the next client restart back to the environment variable value."}),"\n",(0,a.jsx)(t.h3,{id:"client-override-regex",children:"Client Override Regex"}),"\n",(0,a.jsx)(t.p,{children:"If client overrides are enabled, only clients with names matching this regular expression will be allowed to override settings."}),"\n",(0,a.jsx)(t.h3,{id:"web-application-base-address",children:"Web Application Base Address"}),"\n",(0,a.jsx)(t.p,{children:"This is the address that users use to access the web application. It is used to generate links for web hooks."}),"\n",(0,a.jsx)(t.h3,{id:"api-secret-encryption-migration",children:"API Secret Encryption Migration"}),"\n",(0,a.jsx)(t.p,{children:"The API secret is used to encrypt data in the database. Good security practice says that it should be rotated periodically. When this occurs, all the encrypted data in the database needs to be re-encrypted with the new secret. The old secret should be set as the 'PreviousSecret' and then press this button to perform the migration."}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"All API instances should have the secret and previous set to the same values before attempting migration."})}),"\n",(0,a.jsx)(t.h3,{id:"azure-key-vault-for-secrets-experimental",children:"Azure Key Vault for Secrets (Experimental)"}),"\n",(0,a.jsx)(t.p,{children:"Azure Key Vault can be used to store secrets rather than storing them in the Fig database.\nFig only supports this configuration when Fig is deployed in Azure.\nBefore enabling this feature, ensure they Key Vault has been created and the Fig API has been granted access to read and write keys."}),"\n",(0,a.jsx)(t.h3,{id:"poll-interval-override-ms",children:"Poll Interval Override (ms)"}),"\n",(0,a.jsx)(t.p,{children:"Fig clients poll every 30 seconds by default. This can be overridden via environment variable. This is a global override that will apply to all connected clients."}),"\n",(0,a.jsx)(t.p,{children:"It is not recommended to set this value under 10000ms. Values under 2000ms are not allowed."}),"\n",(0,a.jsx)(t.h3,{id:"data-cleanup",children:"Data Cleanup"}),"\n",(0,a.jsx)(t.p,{children:"Data Cleanup is a background process that runs on Fig API startup and every 8-12 hours therafter."}),"\n",(0,a.jsx)(t.p,{children:"In this section it is possible to configure the number of days that should pass before data should be deleted from various places. This prevents the database from becoming too large. Data cleanup can be disabled for each data type."}),"\n",(0,a.jsx)(t.h4,{id:"time-machine-checkpoints",children:"Time Machine (Checkpoints)"}),"\n",(0,a.jsx)(t.p,{children:"Time machine checkpoints are taken automatically if enabled and save a backup (export) of the settings in the database. They can grow very large if there are many settings and images embedded in the documentation and there is a lot of setting change activitiy in the system. It is recommended that data trimming be enabled for this data."}),"\n",(0,a.jsx)(t.h4,{id:"event-logs",children:"Event Logs"}),"\n",(0,a.jsx)(t.p,{children:"Event logs are a record of setting changes, client registrations, etc. They can be optionally cleaned up after a period of time but this is disabled by default as this data is usually quite small and may be important as a record of history."}),"\n",(0,a.jsx)(t.h4,{id:"api-status",children:"API Status"}),"\n",(0,a.jsx)(t.p,{children:"API status entries are created when the Fig API is restarted. A running instance will update the same record. If you have a lot of restarts in your environment, you might want to enable cleanup here as the data is really runtime data and does not have any historical significance."}),"\n",(0,a.jsx)(t.h4,{id:"setting-history",children:"Setting History"}),"\n",(0,a.jsx)(t.p,{children:"The history for individual settings is held in a dedicated table, separate from the event logs. It can also be cleaned up if required but this feature is disabled by default."}),"\n",(0,a.jsx)(t.h2,{id:"appearance",children:"Appearance"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"image-20220802231541473",src:i(44252).A+"",width:"2446",height:"1200"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);