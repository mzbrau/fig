"use strict";(self.webpackChunkfig_documentation=self.webpackChunkfig_documentation||[]).push([[3271],{8283:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"features/azure-keyvault-integration","title":"Azure Key Vault Integration","description":"Fig can handle secret values with all setting values being stored encrypted in an enterprise database. However for some high security deployments it may be desirable to store secret values in a dedicated secret store such as Azure Key Vault. Fig has an integration to Azure Key Vault and if enabled, all values marked as secret attribute will be stored there rather than the fig database.","source":"@site/docs/features/azure-keyvault-integration.md","sourceDirName":"features","slug":"/features/azure-keyvault-integration","permalink":"/docs/features/azure-keyvault-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/mzbrau/fig/tree/main/doc/fig-documentation/docs/features/azure-keyvault-integration.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21},"sidebar":"tutorialSidebar","previous":{"title":"Client Settings Overrides","permalink":"/docs/features/client-settings-override"},"next":{"title":"App.config File Generation","permalink":"/docs/features/app-config-generation"}}');var a=n(4848),r=n(8453);const s={sidebar_position:21},o="Azure Key Vault Integration",l={},d=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Enabling the Integration",id:"enabling-the-integration",level:2},{value:"Using the integration",id:"using-the-integration",level:2},{value:"Integration Design",id:"integration-design",level:2}];function u(e){const t={admonition:"admonition",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"azure-key-vault-integration",children:"Azure Key Vault Integration"})}),"\n",(0,a.jsx)(t.p,{children:"Fig can handle secret values with all setting values being stored encrypted in an enterprise database. However for some high security deployments it may be desirable to store secret values in a dedicated secret store such as Azure Key Vault. Fig has an integration to Azure Key Vault and if enabled, all values marked as secret attribute will be stored there rather than the fig database."}),"\n",(0,a.jsx)(t.admonition,{type:"caution",children:(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Experimental"}),"\nThis feature is currently experimental and requires further testing."]})}),"\n",(0,a.jsx)(t.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,a.jsx)(t.p,{children:"Before this integration can be enabled, the following prerequisites must be met:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"The Fig API must be running in Azure"}),"\n",(0,a.jsx)(t.li,{children:"A KeyVault must be created in Azure"}),"\n",(0,a.jsx)(t.li,{children:"The identity of the machine or container running the Fig API must be granted access to read and write to the KeyVault. It will create and update secrets. It will not delete secrets, even if they are deleted from Fig. Alternatively, you could log into Azure from the console and then run Fig from that console to use the existing connection."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"enabling-the-integration",children:"Enabling the Integration"}),"\n",(0,a.jsxs)(t.p,{children:["To enable the integration, log into Fig as an administrator and select ",(0,a.jsx)(t.strong,{children:"Configuration"}),".\nEnable ",(0,a.jsx)(t.strong,{children:"Azure Key Vault for Secrets"})," and enter the name of the KeyVault created earlier.\nPress the TEST button to verify that the configuration is correct."]}),"\n",(0,a.jsx)(t.h2,{id:"using-the-integration",children:"Using the integration"}),"\n",(0,a.jsx)(t.p,{children:"Once the configuration is enabled, secrets will automatically be pushed to the KeyVault whenever they are updated in the Fig web application. Secrets are not automatically migrated over when the integration is enabled. It is therefore recommended that you change the secret values after enabling the integration.\nClients will access the Fig API as normal but secrets will be populated from the KeyVault rather than the Fig database."}),"\n",(0,a.jsx)(t.h2,{id:"integration-design",children:"Integration Design"}),"\n",(0,a.jsx)(t.p,{children:"The design of the integration is shown below."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Diagram - Option1",src:n(5666).A+"",width:"1080",height:"543"})})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},5666:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/keyvault-option1.excalidraw-68a95cf905155aacb0d5ab99e18024ba.png"},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var i=n(6540);const a={},r=i.createContext(a);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);