"use strict";(self.webpackChunkfig_documentation=self.webpackChunkfig_documentation||[]).push([[9343],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),g=i,h=d["".concat(s,".").concat(g)]||d[g]||p[g]||r;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},7943:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:1},o="Possible Azure Key Vault Integration",l={unversionedId:"planning/azure-keyvault-integration",id:"planning/azure-keyvault-integration",title:"Possible Azure Key Vault Integration",description:"Fig can handle secret values with all setting values being stored encrypted in an enterprise database. However for some high securiy deployments it may be desirable to store secret values in a dedicated secret store such as Azure Key Vault. This page lays out two possible integration options.",source:"@site/docs/planning/azure-keyvault-integration.md",sourceDirName:"planning",slug:"/planning/azure-keyvault-integration",permalink:"/docs/planning/azure-keyvault-integration",draft:!1,editUrl:"https://github.com/mzbrau/fig/tree/main/doc/fig-documentation/docs/planning/azure-keyvault-integration.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Planning",permalink:"/docs/category/planning"}},s={},u=[{value:"Option 1 - Key Vault Integrated to Fig API",id:"option-1---key-vault-integrated-to-fig-api",level:2},{value:"Option 2 - Key Vault accessed directly by clients",id:"option-2---key-vault-accessed-directly-by-clients",level:2}],c={toc:u},d="wrapper";function p(e){let{components:t,...r}=e;return(0,i.kt)(d,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"possible-azure-key-vault-integration"},"Possible Azure Key Vault Integration"),(0,i.kt)("p",null,"Fig can handle secret values with all setting values being stored encrypted in an enterprise database. However for some high securiy deployments it may be desirable to store secret values in a dedicated secret store such as Azure Key Vault. This page lays out two possible integration options."),(0,i.kt)("h2",{id:"option-1---key-vault-integrated-to-fig-api"},"Option 1 - Key Vault Integrated to Fig API"),(0,i.kt)("p",null,"In this option users would set secrets in the Fig web application and these will be sent to the API. However, instead of being persisted in the SQL database, they would be sent to the Azure Key Vault. If the keys didn't exist, the API would create them. If they did exist, they would be updated.\nWhen a client requests their settings, any secrets would be retrieved from Azure Key Vault before being returned to the client."),(0,i.kt)("p",null,"Pros"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"There would be no difference to users or clients when an Azure Key Vault integration was active"),(0,i.kt)("li",{parentName:"ul"},"Fig would handle key creation & update so less configuration required"),(0,i.kt)("li",{parentName:"ul"},"Fig could log when changes are made to those values and which users made the changes. This would make all audit changes in a single location (unless the keys were updated outside of Fig)"),(0,i.kt)("li",{parentName:"ul"},"Fig could alert clients when secret values had been changed allowing for live update")),(0,i.kt)("p",null,"Cons"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The identity of the machine running Fig would have full access to all secrets managed by Fig."),(0,i.kt)("li",{parentName:"ul"},"Fig would be handling the secrets (although not persisting them)")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Diagram - Option1",src:n(7990).Z,width:"1080",height:"543"})),(0,i.kt)("h2",{id:"option-2---key-vault-accessed-directly-by-clients"},"Option 2 - Key Vault accessed directly by clients"),(0,i.kt)("p",null,"In this option, the management of Azure Key Vault would be done outside Fig. Fig would show that the setting existed but it would be read only and only contain a link to the Key Vault. When clients requested settings, they would get all settings from Fig except the secret settings. They would then make a separate request to the secret store for those settings."),(0,i.kt)("p",null,"Pros"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"More secure as each application could be configured to only have access to their settings in Key Vault. Fig would have no access to the Key Vault."),(0,i.kt)("li",{parentName:"ul"},"Fig would not handle the secrets at all apart from the client integration.")),(0,i.kt)("p",null,"Cons"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adding & updating keys would have to be done manually or by some automation scripts outside of Fig"),(0,i.kt)("li",{parentName:"ul"},"Users could not update all settings in the same place"),(0,i.kt)("li",{parentName:"ul"},"Fig would not be able to log secret changes (they are presumably logged in Key Vault)"),(0,i.kt)("li",{parentName:"ul"},"Fig would not be able to alert applications when secrets have changed (unless Key Vault can do this)")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Diagram - Option2",src:n(5597).Z,width:"1160",height:"563"})))}p.isMDXComponent=!0},7990:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/keyvault-option1.excalidraw-68a95cf905155aacb0d5ab99e18024ba.png"},5597:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/keyvault-option2.excalidraw-21331f854b2106ead8adbebdcd77b6eb.png"}}]);