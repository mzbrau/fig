"use strict";(globalThis.webpackChunkfig_documentation=globalThis.webpackChunkfig_documentation||[]).push([[9327],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},85804(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"features/settings-management/configuration-section","title":"Configuration Section","description":"Fig is a configuration provider which means it sets values when are then made available for consumption within the application. When configuring settings for an application, it makes sense for all configuration items to reside within one class (or at least be referenced from that class). However, there are some use cases where you would like Fig to set values for different configuration sections.","source":"@site/docs/features/settings-management/4-configuration-section.md","sourceDirName":"features/settings-management","slug":"/features/settings-management/configuration-section","permalink":"/docs/next/features/settings-management/configuration-section","draft":false,"unlisted":false,"editUrl":"https://github.com/mzbrau/fig/tree/main/doc/fig-documentation/docs/features/settings-management/4-configuration-section.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Classifications","permalink":"/docs/next/features/settings-management/classifications"},"next":{"title":"Data Grids","permalink":"/docs/next/features/settings-management/data-grids"}}');var s=i(74848),o=i(28453);const r={sidebar_position:4},a="Configuration Section",l={},c=[{value:"Usage",id:"usage",level:2},{value:"Example Usage",id:"example-usage",level:2},{value:"Multiple Usage",id:"multiple-usage",level:2},{value:"Json Settings and Data Grids",id:"json-settings-and-data-grids",level:2},{value:"Setting Name Changes",id:"setting-name-changes",level:2}];function g(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration-section",children:"Configuration Section"})}),"\n",(0,s.jsx)(n.p,{children:"Fig is a configuration provider which means it sets values when are then made available for consumption within the application. When configuring settings for an application, it makes sense for all configuration items to reside within one class (or at least be referenced from that class). However, there are some use cases where you would like Fig to set values for different configuration sections."}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[ConfigurationSectionOverride(SectionName, NameOverride)]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,s.jsx)(n.p,{children:"One example might be Serilog configuration. When configuring Serilog within the appsettings.json file, it might look something like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "Serilog": {\r\n    "MinimumLevel": {\r\n      "Default": "Information",\r\n      "Override": {\r\n        "Microsoft": "Warning",\r\n        "System": "Warning"\r\n      }\r\n    },\r\n    "WriteTo": [\r\n      {\r\n        "Name": "Console"\r\n      }\r\n    ]\r\n  }\r\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In this case, the Serilog configuration is nested within the Serilog section. Fig supports this by allowing developers to specify a configuration section for settings to be set within. This is done by specifying the section name within the ",(0,s.jsx)(n.code,{children:"[ConfigurationSectionOverride(SectionName, NameOverride)]"})," attribute."]}),"\n",(0,s.jsx)(n.p,{children:"To apply the above configuration in Fig, you could use the following settings class:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'[Setting("The minimum log level", "Information")]\r\n[ConfigurationSectionOverride("Serilog:MinimumLevel", "Default")]\r\n[ValidValues(typeof(LogEventLevel))]\r\npublic string MinLogLevel { get; set; }\r\n\r\n[Setting("Override for microsoft logs", "Warning")]\r\n[ConfigurationSectionOverride("Serilog:Override", "Microsoft")]\r\n[ValidValues(typeof(LogEventLevel))]\r\npublic string MicrosoftLogOverride { get; set; }\r\n\r\n[Setting("Override for system logs", "Warning")]\r\n[ConfigurationSectionOverride("Serilog:Override", "System")]\r\n[ValidValues(typeof(LogEventLevel))]\r\npublic string SystemLogOverride { get; set; }\r\n\r\n[Setting("The name of the section to write to", "Console")]\r\n[ConfigurationSectionOverride("Serilog:WriteTo", "Name")]\r\npublic string WriteToName { get; set; }\n'})}),"\n",(0,s.jsx)(n.p,{children:"In reality, you might just want to specify certain values in Fig such as the minimum log level and leave the static configuration such as the write to section in the appsettings.json file."}),"\n",(0,s.jsx)(n.h2,{id:"multiple-usage",children:"Multiple Usage"}),"\n",(0,s.jsx)(n.p,{children:"It is also possible to specify multiple configuration section overrides on a single setting. In that case, the value will be applied once for the original, and once per override."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'[Setting("The minimum log level", "Information")]\r\n[ConfigurationSectionOverride("one", "Level")]\r\n[ConfigurationSectionOverride("two")]\r\npublic string MinLogLevel { get; set; }\n'})}),"\n",(0,s.jsx)(n.p,{children:"For example, in the value of the setting MinLogLevel will be applied to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"MinLogLevel\r\none:Level\r\ntwo:MinLogLevel\n"})}),"\n",(0,s.jsx)(n.p,{children:"If there are not settings defined at these locations, the values will just be ignored."}),"\n",(0,s.jsx)(n.h2,{id:"json-settings-and-data-grids",children:"Json Settings and Data Grids"}),"\n",(0,s.jsxs)(n.p,{children:["From Fig v1.2, ",(0,s.jsx)(n.code,{children:"ConfigurationSectionOverride"})," is supported for json and data grid settings too."]}),"\n",(0,s.jsx)(n.h2,{id:"setting-name-changes",children:"Setting Name Changes"}),"\n",(0,s.jsx)(n.p,{children:"In addition to changing the configuration section, it is also possible to change the name of the setting. This can be convenient in cases where you want to match an existing environment variable name, for example when using Aspire."}),"\n",(0,s.jsx)(n.p,{children:"In that case, just set null for the section."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'[Setting("Fig API Address")]\r\n[ConfigurationSectionOverride(null, "FIG_API_URI")]\r\npublic string? FigApiAddress { get; set; }\n'})}),"\n",(0,s.jsx)(n.p,{children:"Note that when you override the name, the setting is also still applied using the original property name from your class so it will also continue to work as expected. This feature is only supported for simple property types (not data grids or json based settings)."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}}}]);